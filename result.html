<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Result</title>
    <!-- Css Link -->
    <link rel="stylesheet" href="./Assets/style.css">
<!-- Font Awesome Link -->
<script src="https://kit.fontawesome.com/0ae0890014.js" crossorigin="anonymous"></script>
</head>
<body class="allcont1"> 
    <p style="text-align: center;font-weight: lighter;color: black;"><b>Note: </b><span>To </span><b>print</b> this <b><span>report card</span></b> click this button<button onclick="printSection()" style="margin-left: 0.5%;"><b>Print Report Card</b></button></p>
    <!-- Report card section started -->
    <section id="sectionToPrint">
        <!-- Report card above section -->
        <div class="sect">
            <img src="./Assets/Images/logo-OpazD70S.png" alt="">
            <h1 id="h1">Your Report Card <i class="fa-solid fa-square-poll-horizontal" style="color: green;margin-left: 1%;"></i></h1>
        </div>
        <!-- User email and name section in report card -->
        <div class="ho">
            <h4 class="hk"></h4>
            <h4 class="hv"></h4>
        </div>


<!-- <h2 style="margin-left: 5%;">Percentage:</h2> -->
<div class="skill">
    <div class="outer">
        <div class="inner">
            <svg viewBox="0 0 100 100">
                <defs>
                    <linearGradient id="GradientColor">
                        <stop offset="0%" stop-color="#ff0000" />
                        <stop offset="100%" stop-color="#0000ff" />
                    </linearGradient>
                </defs>
                <circle cx="50" cy="50" r="35"></circle>
            </svg>
            <div id="number"></div>
        </div>
    </div>
</div>







        </div>
        <!-- User report conditions(fail or pass) section in report card -->
        <h4 class="condition"></h4>
        <h4 class="conditiontwo"></h4>
        <h4 class="conditionthree"></h4>
    <h4 class="conditionfour"></h4>
    <h4 class="conditionfive"></h4>
    <h4 class="conditionsix"></h4>

    <!-- User grade section in report card -->
        <div class="gradeT">
            <h1 class="grade" style="font-size: 27px;font-weight:lighter;color: blue;"></h1>
        </div>
        <!-- User total marks,obtained marks and passing marks section in  report card-->
    <div class="total">
        <h3 class="conditionseven" style="background: gainsboro;color: blue;padding: 1%;font-weight: bolder;">Passing Marks: <b>50</b></h3>
        <h3 class="result">Obtained Marks: 0</h3>
        <h3 class="result-total">Total Marks: <b><span>100</span></b></h3>
    </div>
    <!-- Correct Answers Length Section in report card -->
    <h3 id="number-text" style="background: gainsboro;text-align: center;font-size: 20px;font-weight: bolder;margin-bottom: -4%;margin-top: -4%;"></h3>

    <!-- Correct Questions and Answers Section in report card -->
    <ul id="out-put" style="background:gainsboro;color: black;padding: 2%;list-style: none;;font-weight: lighter;margin-bottom: -4.6%;font-size: 25px;"><b><span id="sel">Section Of Correct Answers:</span></b> </ul>
    <h3 class="none-T"></h3>
    <h3 class="newhthree"></h3>
</section>



<script>
    // Calling tags from html and recieving values from local storage to get value from quiz.html.login.html.register.html,login.js,regiter.js and quiz.js result on result page

    // Local storage value getting (started)
    const nonT = document.querySelector('.non-T');
    const number = Number(localStorage.getItem('numberKey'));
    const numkey = Number(localStorage.getItem('numkey'));
    const result = JSON.parse(localStorage.getItem("result"))
    const storedChechArrJSON = localStorage.getItem('correct');
    const getArr = localStorage.getItem('users')
    let usersArrayFromStorage = JSON.parse(getArr);
    let email = usersArrayFromStorage[0].email;
    const email1 = `Your Email: ${email}`;
    let username = usersArrayFromStorage[0].username;
    const user1 = `Your Name: ${username}`;
    // Local storage value getting (ended)

    // Calling tags from html (Section started)
    const h3 = document.querySelector('.result');
    const conditionNote = document.querySelector('.condition')
    const conditionNotetwo = document.querySelector('.conditiontwo')
    const conditionNotethree = document.querySelector('.conditionthree')
    const conditionNotefour = document.querySelector('.conditionfour')
    const conditionNotefive = document.querySelector('.conditionfive')
    const conditionNotesix = document.querySelector('.conditionsix')
    const numberText = document.getElementById('number-text');
    const grade = document.querySelector('.grade')
    const section  = document.querySelector('section');
    const outPut = document.getElementById('out-put');
    const hk = document.querySelector('.hk');
    const hv = document.querySelector('.hv');
    // Calling tags from html (Section started)


// Checking local storage values
console.log(numkey)
console.log(storedChechArrJSON)

// Showing user email and name
numberText.innerHTML = `Correct Selected Answers: ${number}`;
hk.innerHTML = `${email1}`;
if(username === null){
    hv.innerHTML = 'Your Name: null'
}else{
    hv.innerHTML = `${user1}`;
}

// Showing correct answers length on report card
if (storedChechArrJSON) {

    const storedChechArr = JSON.parse(storedChechArrJSON);


    if (Array.isArray(storedChechArr)) {
        storedChechArr.forEach(item => {
            const listItem = document.createElement('li');
            listItem.textContent = item;
            listItem.classList.add('styled-list-item');
            outPut.appendChild(listItem);
        });
    } else {
        console.error('storedChechArr is not an array:', storedChechArr);
    }
} else {
    console.error('No data found in local storage with key "correct".');
    outPut.innerHTML = '<ul><h2 style="text-align:center;font-size:25px;font-weight:lighter;color:black">Section Of Selected Correct Answers</h2><h3 style="text-align:center;color:red;font-size:22px"><b>No Correct Answer is selected</b></h3></ul>'
}
// Showing result with conditions(fail or pass) on report card
    console.log(result.result)
    if(result.result < 20){
        conditionNote.innerHTML = `<i class="fa-solid fa-circle-exclamation" style="font-size:25;letter-sapcing:1px;padding:1%;margin-top:1%;border:1px solid black;border-radius:50px;font-size:30px"> Failed</i><br><b>Note: </b>You are  failed! ,you are eliminated from this course.`
        grade.innerHTML = `Grade: <b>No Grade</b>`
        conditionNotesix.innerHTML = `No grade because you obtained very low marks`
 
    }
   else if(result.result < 30){
        conditionNote.innerHTML = `<i class="fa-solid fa-circle-exclamation" style="font-size:25;letter-sapcing:1px;padding:1%;margin-top:1%;border:1px solid black;border-radius:50px;font-size:30px"> Failed</i><br><b>Note: </b>You are  failed! ,you are eliminated from this course.`
        grade.innerHTML = `Grade: <b>F</b>`
    }
    else if(result.result < 40){
        conditionNote.innerHTML = `<i class="fa-solid fa-circle-exclamation" style="font-size:25;letter-sapcing:1px;padding:1%;margin-top:1%;border:1px solid black;border-radius:50px;font-size:30px"> Failed</i><br><b>Note: </b>You are  failed! ,you are eliminated from this course.`
        grade.innerHTML = `Grade: <b>E</b>`
    }
    else if(result.result < 50){
        conditionNote.innerHTML = `<i class="fa-solid fa-circle-exclamation" style="font-size:25;letter-sapcing:1px;padding:1%;margin-top:1%;border:1px solid black;border-radius:50px;font-size:30px"> Failed</i><br><b>Note: </b>You are  failed! ,you are eliminated from this course.`
        grade.innerHTML = `Grade: <b>D</b>`

    }else if(result.result < 60){
        conditionNotetwo.innerHTML = `<i class="fa-solid fa-check" style="font-size:25;letter-sapcing:1px;padding:1%;margin-top:1%;border:1px solid black;border-radius:50px;font-size:30px"> Passed</i><br><b>Note: </b>You are  passed! ,but next time we are hoping you will do well`
        grade.innerHTML = `Grade: <b>C</b>`

    }else if(result.result < 70 ){
        conditionNotethree.innerHTML = `<i class="fa-solid fa-check" style="font-size:25;letter-sapcing:1px;padding:1%;margin-top:1%;border:1px solid black;border-radius:50px;font-size:30px"> Passed</i><br><b>Note: </b>Congrats!You are  passed!,but next time we want to see improveness`
        grade.innerHTML = `Grade: <b>B</b>`
    }
    else if(result.result < 80 ){
        conditionNotefour.innerHTML = `<i class="fa-solid fa-check" style="font-size:25;letter-sapcing:1px;padding:1%;margin-top:1%;border:1px solid black;border-radius:50px;font-size:30px"> Passed</i><br><b>Note: </b>Congrats!You are  passed! ,welldone`
        grade.innerHTML = `Grade: <b>A</b>`
    }
    else if(result.result < 90 ){
        conditionNotefive.innerHTML = `<i class="fa-solid fa-check" style="font-size:25;letter-sapcing:1px;padding:1%;margin-top:1%;border:1px solid black;border-radius:50px;font-size:30px"> Passed</i><br><b>Note: </b>Congrats!You are  passed! ,marwellous`
        grade.innerHTML = `Grade: <b>A+</b>`
    }else if(result.result <= 100 ){
        conditionNotesix.innerHTML = `<i class="fa-solid fa-check" style="font-size:25;letter-sapcing:1px;padding:1%;margin-top:1%;border:1px solid black;border-radius:50px;font-size:30px"> Passed</i><br><b>Note: </b>Congrats!You are  passed! ,wonderfull marwellous`
        grade.innerHTML = `Grade: <b>A++</b>`
    }
    h3.innerHTML = `Obtained Marks: <b>${result.result}</b>`
    console.log(result);

// This for print button to print report card
    function printSection() {
    window.print();
}
let numBer = document.querySelector('#number');
let circle = document.querySelector('circle');
let Result = { result: result.result }; // Updated result object with 23%
numBer.innerHTML = `${Result.result}%`;
const targetNumber = Result.result;

// Calculate total circle stroke length based on radius and circumference
const radius = circle.getAttribute('r');
const circumference = 2 * Math.PI * radius;

// Calculate dash array and offset based on target percentage
const dashArray = `${circumference * (targetNumber / 100)} ${circumference * (1 - (targetNumber / 100))}`;
const dashOffset = circumference * (1 - (targetNumber / 100));

// Apply styles to the circle
circle.style.strokeDasharray = dashArray;
circle.style.strokeDashoffset = dashOffset;

// Function to update progress (if animated)
// let counter;
function updateProgress() { 
    counter = Math.min(counter + 1, targetNumber);
  numBer.innerHTML = counter + '%';
}

// Uncomment to animate progress
// let interval = setInterval(updateProgress, 20);

// Check for target number on initial run as well
updateProgress();

// Uncomment to stop animation when target is reached
// if (counter === targetNumber) {
//   clearInterval(interval);
// }
</script>













</body>
</html>